{
  "version": "8",
  "dialect": "postgres",
  "id": "b09040e8-9100-41f2-944e-bbf9ee1fa6b7",
  "prevIds": [
    "00000000-0000-0000-0000-000000000000"
  ],
  "ddl": [
    {
      "isRlsEnabled": false,
      "name": "blocks",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "note_closure",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "notes",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "note_id",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "type",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "integer",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "position",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "jsonb",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "'{}'",
      "generated": null,
      "identity": null,
      "name": "content_json",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "''",
      "generated": null,
      "identity": null,
      "name": "plain_text",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "blocks"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "ancestor_id",
      "entityType": "columns",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "descendant_id",
      "entityType": "columns",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "type": "integer",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "depth",
      "entityType": "columns",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "parent_id",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "title",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "notes"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "note_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "position",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "blocks_idx_note_position",
      "entityType": "indexes",
      "schema": "public",
      "table": "blocks"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "blocks_idx_user",
      "entityType": "indexes",
      "schema": "public",
      "table": "blocks"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "note_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "position",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "blocks_uniq_note_position",
      "entityType": "indexes",
      "schema": "public",
      "table": "blocks"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "ancestor_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "note_closure_idx_user_ancestor",
      "entityType": "indexes",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "descendant_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "note_closure_idx_user_descendant",
      "entityType": "indexes",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "parent_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "title",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "notes_uniq_user_parent_title",
      "entityType": "indexes",
      "schema": "public",
      "table": "notes"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "title",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": "\"parent_id\" is null",
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "notes_uniq_user_root_title",
      "entityType": "indexes",
      "schema": "public",
      "table": "notes"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "notes_idx_user",
      "entityType": "indexes",
      "schema": "public",
      "table": "notes"
    },
    {
      "nameExplicit": false,
      "columns": [
        "note_id"
      ],
      "schemaTo": "public",
      "tableTo": "notes",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "blocks_note_id_notes_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "blocks"
    },
    {
      "nameExplicit": false,
      "columns": [
        "ancestor_id"
      ],
      "schemaTo": "public",
      "tableTo": "notes",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "note_closure_ancestor_id_notes_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "nameExplicit": false,
      "columns": [
        "descendant_id"
      ],
      "schemaTo": "public",
      "tableTo": "notes",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "note_closure_descendant_id_notes_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "nameExplicit": false,
      "columns": [
        "parent_id"
      ],
      "schemaTo": "public",
      "tableTo": "notes",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "SET NULL",
      "name": "notes_parent_id_notes_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "notes"
    },
    {
      "columns": [
        "user_id",
        "ancestor_id",
        "descendant_id"
      ],
      "nameExplicit": true,
      "name": "note_closure_pk",
      "entityType": "pks",
      "schema": "public",
      "table": "note_closure"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "blocks_pkey",
      "schema": "public",
      "table": "blocks",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "notes_pkey",
      "schema": "public",
      "table": "notes",
      "entityType": "pks"
    }
  ],
  "renames": []
}